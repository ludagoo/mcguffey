
var lesson = new Array();
lesson[0] = ["empty"];
lesson[1] = ['Lesson 1', ['a', './resources/audio/a.mp3'], ['cat','./resources/audio/cat.mp3'], ['rat','./resources/audio/rat.mp3'], ['and','./resources/audio/and.mp3'], './resources/audio/explain1.mp3', './resources/audio/story1.mp3', 'story1'];
lesson[2] = ['Lesson 2', ['at', './resources/audio/at.mp3'], ['the','./resources/audio/the.mp3'], ['ran','./resources/audio/ran.mp3'], ['has','./resources/audio/has.mp3'], ['Anna','./resources/audio/anna.mp3'], './resources/audio/explain2.mp3', './resources/audio/story2.mp3', 'story2'];
lesson[3] = ['Lesson 3', ['Dan', './resources/audio/dan.mp3'], ['hat','./resources/audio/hat.mp3'], ['fan','./resources/audio/fan.mp3'], ['can','./resources/audio/can.mp3'], './resources/audio/explain3.mp3', './resources/audio/story3.mp3', 'story3'];
lesson[4] = ['Lesson 4', ['man', './resources/audio/man.mp3'], ['cap','./resources/audio/cap.mp3'], ['lad','./resources/audio/lad.mp3'], ['sat','./resources/audio/sat.mp3'], './resources/audio/explain4.mp3', './resources/audio/story4.mp3', 'story4'];
lesson[5] = ['Lesson 5', './resources/audio/story5.mp3', 'story5'];
lesson[6] = ['Lesson 6', ['dog', './resources/audio/dog.mp3'], ['Spot','./resources/audio/spot.mp3'], ['fat','./resources/audio/fat.mp3'], ["Dan's",'./resources/audio/dans.mp3'], './resources/audio/explain6.mp3', './resources/audio/story6.mp3', 'story6'];
lesson[7] = ['Lesson 7', ['see', './resources/audio/see.mp3'], ['sees','./resources/audio/sees.mp3'], ['frog','./resources/audio/frog.mp3'], ["on",'./resources/audio/on.mp3'], ["log",'./resources/audio/log.mp3'], './resources/audio/explain7.mp3', './resources/audio/story7.mp3', 'story7'];
lesson[8] = ['Lesson 8', ['it', './resources/audio/it.mp3'], ['lamp','./resources/audio/lamp.mp3'], ["is",'./resources/audio/is.mp3'], ["mat",'./resources/audio/mat.mp3'], ["stand",'./resources/audio/stand.mp3'], ["Anna's",'./resources/audio/annas.mp3'], './resources/audio/explain8.mp3', './resources/audio/story8.mp3', 'story8'];
lesson[9] = ['Lesson 9', ['not', './resources/audio/not.mp3'], ['he','./resources/audio/he.mp3'], ["him",'./resources/audio/him.mp3'], ["his",'./resources/audio/his.mp3'], ["catch",'./resources/audio/catch.mp3'], ["Tom",'./resources/audio/tom.mp3'], ["horse",'./resources/audio/horse.mp3'], './resources/audio/explain9.mp3', './resources/audio/story9.mp3', 'story9'];
lesson[10] = ['Lesson 10', './resources/audio/story10.mp3', 'story10'];
lesson[11] = ['Lesson 11', ['in', './resources/audio/in.mp3'], ['eggs','./resources/audio/eggs.mp3'], ["hen",'./resources/audio/hen.mp3'], ["she",'./resources/audio/she.mp3'], ["box",'./resources/audio/box.mp3'], ["nest",'./resources/audio/nest.mp3'], ["get",'./resources/audio/get.mp3'], ["this",'./resources/audio/this.mp3'], './resources/audio/explain11.mp3', './resources/audio/story11.mp3', 'story11'];
lesson[12] = ['Lesson 12', ['old', './resources/audio/old.mp3'], ['run','./resources/audio/run.mp3'], ["fox",'./resources/audio/fox.mp3'], './resources/audio/explain12.mp3', './resources/audio/story12.mp3', 'story12'];
lesson[13] = ['Lesson 13', ['I', './resources/audio/i.mp3'], ['Emma','./resources/audio/emma.mp3'], ["by",'./resources/audio/by.mp3'], ["ducks",'./resources/audio/ducks.mp3'], ["feed",'./resources/audio/feed.mp3'], ["will",'./resources/audio/will.mp3'], ["them",'./resources/audio/them.mp3'], ["pond",'./resources/audio/pond.mp3'], "./resources/audio/explain13.mp3", './resources/audio/story13.mp3', 'story13'];
lesson[14] = ['Lesson 14', ['to', './resources/audio/to.mp3'], ['holds','./resources/audio/holds.mp3'], ["blind",'./resources/audio/blind.mp3'], ["kind",'./resources/audio/kind.mp3'], ["Mary",'./resources/audio/mary.mp3'], ["hand",'./resources/audio/hand.mp3'], './resources/audio/explain14.mp3', './resources/audio/story14.mp3', 'story14'];
lesson[15] = ['Lesson 15', './resources/audio/story15.mp3', 'story15'];
lesson[16] = ['Lesson 16', ['her', './resources/audio/her.mp3'], ['let','./resources/audio/let.mp3'], ["Sue",'./resources/audio/sue.mp3'], ["doll",'./resources/audio/doll.mp3'], ["dress",'./resources/audio/dress.mp3'], ["new",'./resources/audio/new.mp3'], './resources/audio/explain16.mp3', './resources/audio/story16.mp3', 'story16'];
lesson[17] = ['Lesson 17', ['rob', './resources/audio/rob.mp3'], ['do','./resources/audio/do.mp3'], ["there",'./resources/audio/there.mp3'], ["five",'./resources/audio/five.mp3'], ["bird",'./resources/audio/bird.mp3'], ["tree",'./resources/audio/tree.mp3'], './resources/audio/explain17.mp3', './resources/audio/story17.mp3', 'story17']
lesson[18] = ['Lesson 18', ['cage', './resources/audio/cage.mp3'], ['pet','./resources/audio/pet.mp3'], ["sing",'./resources/audio/sing.mp3'], ["lives",'./resources/audio/lives.mp3'], ["loves",'./resources/audio/loves.mp3'], ["so",'./resources/audio/so.mp3'], './resources/audio/explain18.mp3', './resources/audio/story18.mp3', 'story18'];
lesson[19] = ['Lesson 19', ['are', './resources/audio/are.mp3'], ['you','./resources/audio/you.mp3'], ["boys",'./resources/audio/boys.mp3'], ["of",'./resources/audio/of.mp3'], ["yes",'./resources/audio/yes.mp3'], ["fast",'./resources/audio/fast.mp3'], ["too",'./resources/audio/too.mp3'], ["like",'./resources/audio/like.mp3'], ["play",'./resources/audio/play.mp3'], './resources/audio/explain19.mp3', './resources/audio/story19.mp3', 'story19'];
lesson[20] = ['Lesson 20', './resources/audio/story20.mp3', 'story20'];
lesson[21] = ['Lesson 21', ['day', './resources/audio/day.mp3'], ['night','./resources/audio/night.mp3'], ["owl",'./resources/audio/owl.mp3'], ["but",'./resources/audio/but.mp3'], ["well",'./resources/audio/well.mp3'], ["best",'./resources/audio/best.mp3'], ["what",'./resources/audio/what.mp3'], ["big",'./resources/audio/big.mp3'], ["eyes",'./resources/audio/eyes.mp3'], ["an",'./resources/audio/an.mp3'], './resources/audio/explain21.mp3', './resources/audio/story21.mp3', 'story21'];
lesson[22] = ['Lesson 22', ['cows', './resources/audio/cows.mp3'], ['off','./resources/audio/off.mp3'], ["shade",'./resources/audio/shade.mp3'], ["our",'./resources/audio/our.mp3'], ["grass",'./resources/audio/grass.mp3'], ["hot",'./resources/audio/hot.mp3'], ["they",'./resources/audio/they.mp3'], ["barn",'./resources/audio/barn.mp3'], ["come",'./resources/audio/come.mp3'], './resources/audio/explain22.mp3', './resources/audio/story22.mp3', 'story22'];
lesson[23] = ['Lesson 23', ['soon', './resources/audio/soon.mp3'], ['set','./resources/audio/set.mp3'], ["neck",'./resources/audio/neck.mp3'], ["sun",'./resources/audio/sun.mp3'], ["bell",'./resources/audio/bell.mp3'], ["way",'./resources/audio/way.mp3'], ["their",'./resources/audio/their.mp3'], ["one",'./resources/audio/one.mp3'], "./resources/audio/explain23.mp3", './resources/audio/story23.mp3', 'story23'];
lesson[24] = ['Lesson 24', ['brave', './resources/audio/brave.mp3'], ['men','./resources/audio/men.mp3'], ["save",'./resources/audio/save.mp3'], ["ship",'./resources/audio/ship.mp3'], ["rock",'./resources/audio/rock.mp3'], ["boat",'./resources/audio/boat.mp3'], ["drown",'./resources/audio/drown.mp3'], ["if",'./resources/audio/if.mp3'], './resources/audio/explain24.mp3', './resources/audio/story24.mp3', 'story24'];
lesson[25] = ['Lesson 25', './resources/audio/story25.mp3', 'story25'];
lesson[26] = ['Lesson 26', ['fall', './resources/audio/fall.mp3'], ['ice','./resources/audio/ice.mp3'], ["skates",'./resources/audio/skates.mp3'], ["did",'./resources/audio/did.mp3'], ["had",'./resources/audio/had.mp3'], ["with",'./resources/audio/with.mp3'], ["cry",'./resources/audio/cry.mp3'], ["stone",'./resources/audio/stone.mp3'], './resources/audio/explain26.mp3', './resources/audio/story26.mp3', 'story26'];
lesson[27] = ['Lesson 27', ['look', './resources/audio/look.mp3'], ['John','./resources/audio/John.mp3'], ["here",'./resources/audio/here.mp3'], ["all",'./resources/audio/all.mp3'], ["mill",'./resources/audio/mill.mp3'], ["have",'./resources/audio/have.mp3'], ["round",'./resources/audio/round.mp3'], ["go",'./resources/audio/go.mp3'], ["wheel",'./resources/audio/wheel.mp3'], './resources/audio/explain27.mp3', './resources/audio/story27.mp3', 'story27']
lesson[28] = ['Lesson 28', ['Jane', './resources/audio/Jane.mp3'], ['roll','./resources/audio/roll.mp3'], ["some",'./resources/audio/some.mp3'], ["or",'./resources/audio/or.mp3'], ["girls",'./resources/audio/girls.mp3'], ["floor",'./resources/audio/floor.mp3'], ["which",'./resources/audio/which.mp3'], ["black",'./resources/audio/black.mp3'], './resources/audio/explain28.mp3', './resources/audio/story28.mp3', 'story28'];
lesson[29] = ['Lesson 29', ['for', './resources/audio/for.mp3'], ['hurt','./resources/audio/hurt.mp3'], ["how",'./resources/audio/how.mp3'], ["out",'./resources/audio/out.mp3'], ["cars",'./resources/audio/cars.mp3'], ["try",'./resources/audio/try.mp3'], ["train",'./resources/audio/train.mp3'], ["be",'./resources/audio/be.mp3'], ["would",'./resources/audio/would.mp3'], ["as",'./resources/audio/as.mp3'], './resources/audio/explain29.mp3', './resources/audio/story29.mp3', 'story29'];
lesson[30] = ['Lesson 30', './resources/audio/story30.mp3', 'story30'];

var lessonNumber = 0;
var practice = [];
var index = 0;
var l = 0;
var wait = 0;
var click = 0;
var $page = $('#page');
var $yes = $('#yes');
var $lessonList = $("#lessonList");
var wordWritten = "";
var L;
var explain;
var story;
var storyWritten;
var getStory = 1;

var audio = document.createElement('audio');

$(document).ready(function() {

//Pick a lesson
  $(".choose").click(function() {
      $('#readButton').css('display', 'flex');
      $('#lessonList').css('display', 'none');
      $(this).css('background-image', 'none');
      $(this).css('color', '#000');
      var lessonNumber = $(this).attr("id");
      var lessonNumber = lessonNumber.slice(6);
      l = 0; //resets variable
      wait = 0; //resets variable
      makePractice(lessonNumber);
   });

/*creates the practice array, just the words
As well as sets up the audio for the list of words at the end
Contains Yes which is the click function to show the list of words
at the end. Also has the buttons for reading the story and putting up
the list of words*/
function makePractice(lessonNumber) {
  console.log('makePractice');
  practice = [];
  var thisLesson = lesson[lessonNumber];
  var long = thisLesson.length - 4;
  for (var i=1; i <= long; i++ ) {
    practice.push(thisLesson[i]);
    var L = practice.length;
  } //closes for
  index = 0;

  var explainAudio = thisLesson.length - 3;
  var explain = thisLesson[explainAudio];

  $yes.unbind().click(function() {
    if (clickYes === 0) {
      clickYes = 1; //so they can't double click and play the audio twice
    $page.css('display', 'none');
    $('#yes').css('display', 'none');
    $('#endScreen').css('display', 'flex');
    for (var i=0; i<L; i++) {
      $('#endScreen').append('<h2>' + practice[i][0] + '</h2>');
  }; //closes for

  var audioExplain = new Audio(explain);
  audioExplain.play();
  }; //closes if
  }); //closes yes

//Length zero is for the review days where there are no words. It goes straight
//to the story
  if (practice.length === 0) {
    writeStory($page, thisLesson);
  } else {
    writeWords($page, practice, index, L);
  }; //closes else

//Button to read story
  $("#readButton").unbind().click(function() {
    $('#endScreen').empty();
     writeStory($page, thisLesson);
  });

//button click that shows list of lessons
  $("#unorderedList").unbind().click(function() {
     $page.empty();
    $('#endScreen').empty();
    var end = thisLesson.length - 1;
    var getStory = thisLesson[end];
      $('#'+ getStory).css('display', 'none');
      $("#readButton").css('display', 'none');
     $lessonList.css('display', 'flex');
  });

}; //closes makePractice

//shows the story (which is in html)
function writeStory($page, thisLesson) {
  console.log('write story');
   $('#readButton').css('display', 'none');
   var end = thisLesson.length - 1;
   var getStory = thisLesson[end];
    $page.empty();
    $('#'+ getStory).css('display','block');

//Plays the story audio
    $(".readToMe").unbind().click(function() {
      var storyAudio = thisLesson.length - 2;
      var getStoryAudio = thisLesson[storyAudio];
      var audio = new Audio(getStoryAudio);
      audio.play();
    });  //  closes read to me

//Plays applause when you've read the story.
        $(".readIt").click(function() {
          var audio = new Audio('applause.mp3');
          audio.play();
        }); // closes play cheer

}; // closes writeStory

//Writes the first set of words on the page in order
function newWord($page, index, L) {
  console.log('new word');
      click = 0;
      console.log('l ' + l);
  if (l < L-1) {
      l = l + 1;
      index = l;
      writeWords($page, practice, index, L);
  } else {
      practiceWords($page, index, L);
  } //closes else
}; //closes newWord

//Chooses the random words from the lesson, wait holds off showing checkmark
//until two times the number of words in the lesson have shown randomly
function practiceWords($page, index, L) {
  console.log('practice words');
  if (wait === 2*L) {
    clickYes = 0;
    $('#yes').css('display', 'block');
    wait++;
  } else {
    wait = wait + 1;
  } //closes else
  var index = Math.floor(Math.random() * L);
  writeWords($page, practice, index, L);
}; //closes practiceWords

//Writes the new word or random word on the page
function writeWords($page, practice, index, L) {
  console.log('write words');
  $page.empty();
  $page.css('display', 'flex');
  wordWritten = practice[index][0];
  $page.html('<span>' + wordWritten + '</span>');
  var wordAudio = practice[index][1];
  audio.src = wordAudio;
  //unbind keeps things from happening twice
  $page.unbind().click(function() {
    if (click === 0) {
    $('span').css('text-shadow', '0px 0px white');
    audio.play();
    click = 1;
  window.setTimeout(function() {
    newWord($page, index, L);
}, 2000);
}; // closes if
}); //closes page click

}; //closes writeWords

//Write directions and close directions
$('#directions').click(function() {
    $('.directions').css({
        'display': 'block',
        'z-index': '10'
    });
});

$('#closeDirections').click(function() {
    $('.directions').css({
        'display': 'none'
    });
});

  }); // closes document load
