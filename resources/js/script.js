
var lesson = new Array();
lesson[0] = ["empty"];
lesson[1] = ['Lesson 1', ['a', './resources/audio/a.mp3'], ['cat','./resources/audio/cat.mp3'], ['rat','./resources/audio/rat.mp3'], ['and','./resources/audio/and.mp3'], './resources/audio/explain1.mp3', './resources/audio/story1.mp3', 'story1'];
lesson[2] = ['Lesson 2', ['at', './resources/audio/at.mp3'], ['the','./resources/audio/the.mp3'], ['ran','./resources/audio/ran.mp3'], ['has','./resources/audio/has.mp3'], ['Anna','./resources/audio/anna.mp3'], './resources/audio/explain2.mp3', './resources/audio/story2.mp3', 'story2'];
lesson[3] = ['Lesson 3', ['Dan', './resources/audio/dan.mp3'], ['hat','./resources/audio/hat.mp3'], ['fan','./resources/audio/fan.mp3'], ['can','./resources/audio/can.mp3'], './resources/audio/explain3.mp3', './resources/audio/story3.mp3', 'story3'];
lesson[4] = ['Lesson 4', ['man', './resources/audio/man.mp3'], ['cap','./resources/audio/cap.mp3'], ['lad','./resources/audio/lad.mp3'], ['sat','./resources/audio/sat.mp3'], './resources/audio/explain4.mp3', './resources/audio/story4.mp3', 'story4'];
lesson[5] = ['Lesson 5', './resources/audio/story5.mp3', 'story5'];
lesson[6] = ['Lesson 6', ['dog', './resources/audio/dog.mp3'], ['Spot','./resources/audio/spot.mp3'], ['fat','./resources/audio/fat.mp3'], ["Dan's",'./resources/audio/dans.mp3'], './resources/audio/explain6.mp3', './resources/audio/story6.mp3', 'story6'];
lesson[7] = ['Lesson 7', ['see', './resources/audio/see.mp3'], ['sees','./resources/audio/sees.mp3'], ['frog','./resources/audio/frog.mp3'], ["on",'./resources/audio/on.mp3'], ["log",'./resources/audio/log.mp3'], './resources/audio/explain7.mp3', './resources/audio/story7.mp3', 'story7'];
lesson[8] = ['Lesson 8', ['it', './resources/audio/it.mp3'], ['lamp','./resources/audio/lamp.mp3'], ["is",'./resources/audio/is.mp3'], ["mat",'./resources/audio/mat.mp3'], ["stand",'./resources/audio/stand.mp3'], ["Anna's",'./resources/audio/annas.mp3'], './resources/audio/explain8.mp3', './resources/audio/story8.mp3', 'story8'];
lesson[9] = ['Lesson 9', ['not', './resources/audio/not.mp3'], ['he','./resources/audio/he.mp3'], ["him",'./resources/audio/him.mp3'], ["his",'./resources/audio/his.mp3'], ["catch",'./resources/audio/catch.mp3'], ["Tom",'./resources/audio/tom.mp3'], ["horse",'./resources/audio/horse.mp3'], './resources/audio/explain9.mp3', './resources/audio/story9.mp3', 'story9'];
lesson[10] = ['Lesson 10', './resources/audio/story10.mp3', 'story10'];
lesson[11] = ['Lesson 11', ['in', './resources/audio/in.mp3'], ['eggs','./resources/audio/eggs.mp3'], ["hen",'./resources/audio/hen.mp3'], ["she",'./resources/audio/she.mp3'], ["box",'./resources/audio/box.mp3'], ["nest",'./resources/audio/nest.mp3'], ["get",'./resources/audio/get.mp3'], ["this",'./resources/audio/this.mp3'], './resources/audio/explain11.mp3', './resources/audio/story11.mp3', 'story11'];
lesson[12] = ['Lesson 12', ['old', './resources/audio/old.mp3'], ['run','./resources/audio/run.mp3'], ["fox",'./resources/audio/fox.mp3'], './resources/audio/explain12.mp3', './resources/audio/story12.mp3', 'story12'];
lesson[13] = ['Lesson 13', ['I', './resources/audio/i.mp3'], ['Emma','./resources/audio/emma.mp3'], ["by",'./resources/audio/by.mp3'], ["ducks",'./resources/audio/ducks.mp3'], ["feed",'./resources/audio/feed.mp3'], ["will",'./resources/audio/will.mp3'], ["them",'./resources/audio/them.mp3'], ["pond",'./resources/audio/pond.mp3'], "./resources/audio/explain13.mp3", './resources/audio/story13.mp3', 'story13'];
lesson[14] = ['Lesson 14', ['to', './resources/audio/to.mp3'], ['holds','./resources/audio/holds.mp3'], ["blind",'./resources/audio/blind.mp3'], ["kind",'./resources/audio/kind.mp3'], ["Mary",'./resources/audio/mary.mp3'], ["hand",'./resources/audio/hand.mp3'], './resources/audio/explain14.mp3', './resources/audio/story14.mp3', 'story14'];
lesson[15] = ['Lesson 15', './resources/audio/story15.mp3', 'story15'];
lesson[16] = ['Lesson 16', ['her', './resources/audio/her.mp3'], ['let','./resources/audio/let.mp3'], ["Sue",'./resources/audio/sue.mp3'], ["doll",'./resources/audio/doll.mp3'], ["dress",'./resources/audio/dress.mp3'], ["new",'./resources/audio/new.mp3'], './resources/audio/explain16.mp3', './resources/audio/story16.mp3', 'story16'];
lesson[17] = ['Lesson 17', ['rob', './resources/audio/rob.mp3'], ['do','./resources/audio/do.mp3'], ["there",'./resources/audio/there.mp3'], ["five",'./resources/audio/five.mp3'], ["bird",'./resources/audio/bird.mp3'], ["tree",'./resources/audio/tree.mp3'], './resources/audio/explain17.mp3', './resources/audio/story17.mp3', 'story17']
lesson[18] = ['Lesson 18', ['cage', './resources/audio/cage.mp3'], ['pet','./resources/audio/pet.mp3'], ["sing",'./resources/audio/sing.mp3'], ["lives",'./resources/audio/lives.mp3'], ["loves",'./resources/audio/loves.mp3'], ["so",'./resources/audio/so.mp3'], './resources/audio/explain18.mp3', './resources/audio/story18.mp3', 'story18'];
lesson[19] = ['Lesson 19', ['are', './resources/audio/are.mp3'], ['you','./resources/audio/you.mp3'], ["boys",'./resources/audio/boys.mp3'], ["of",'./resources/audio/of.mp3'], ["yes",'./resources/audio/yes.mp3'], ["fast",'./resources/audio/fast.mp3'], ["too",'./resources/audio/too.mp3'], ["like",'./resources/audio/like.mp3'], ["play",'./resources/audio/play.mp3'], './resources/audio/explain19.mp3', './resources/audio/story19.mp3', 'story19'];
lesson[20] = ['Lesson 20', './resources/audio/story20.mp3', 'story20'];
lesson[21] = ['Lesson 21', ['day', './resources/audio/day.mp3'], ['night','./resources/audio/night.mp3'], ["owl",'./resources/audio/owl.mp3'], ["but",'./resources/audio/but.mp3'], ["well",'./resources/audio/well.mp3'], ["best",'./resources/audio/best.mp3'], ["what",'./resources/audio/what.mp3'], ["big",'./resources/audio/big.mp3'], ["eyes",'./resources/audio/eyes.mp3'], ["an",'./resources/audio/an.mp3'], './resources/audio/explain21.mp3', './resources/audio/story21.mp3', 'story21'];
lesson[22] = ['Lesson 22', ['cows', './resources/audio/cows.mp3'], ['off','./resources/audio/off.mp3'], ["shade",'./resources/audio/shade.mp3'], ["our",'./resources/audio/our.mp3'], ["grass",'./resources/audio/grass.mp3'], ["hot",'./resources/audio/hot.mp3'], ["they",'./resources/audio/they.mp3'], ["barn",'./resources/audio/barn.mp3'], ["come",'./resources/audio/come.mp3'], './resources/audio/explain22.mp3', './resources/audio/story22.mp3', 'story22'];
lesson[23] = ['Lesson 23', ['soon', './resources/audio/soon.mp3'], ['set','./resources/audio/set.mp3'], ["neck",'./resources/audio/neck.mp3'], ["sun",'./resources/audio/sun.mp3'], ["bell",'./resources/audio/bell.mp3'], ["way",'./resources/audio/way.mp3'], ["their",'./resources/audio/their.mp3'], ["one",'./resources/audio/one.mp3'], "./resources/audio/explain23.mp3", './resources/audio/story23.mp3', 'story23'];
lesson[24] = ['Lesson 24', ['brave', './resources/audio/brave.mp3'], ['men','./resources/audio/men.mp3'], ["save",'./resources/audio/save.mp3'], ["ship",'./resources/audio/ship.mp3'], ["rock",'./resources/audio/rock.mp3'], ["boat",'./resources/audio/boat.mp3'], ["drown",'./resources/audio/drown.mp3'], ["if",'./resources/audio/if.mp3'], './resources/audio/explain24.mp3', './resources/audio/story24.mp3', 'story24'];
lesson[25] = ['Lesson 25', './resources/audio/story25.mp3', 'story25'];
lesson[26] = ['Lesson 26', ['fall', './resources/audio/fall.mp3'], ['ice','./resources/audio/ice.mp3'], ["skates",'./resources/audio/skates.mp3'], ["did",'./resources/audio/did.mp3'], ["had",'./resources/audio/had.mp3'], ["with",'./resources/audio/with.mp3'], ["cry",'./resources/audio/cry.mp3'], ["stone",'./resources/audio/stone.mp3'], './resources/audio/explain26.mp3', './resources/audio/story26.mp3', 'story26'];
lesson[27] = ['Lesson 27', ['look', './resources/audio/look.mp3'], ['John','./resources/audio/john.mp3'], ["here",'./resources/audio/here.mp3'], ["all",'./resources/audio/all.mp3'], ["mill",'./resources/audio/mill.mp3'], ["have",'./resources/audio/have.mp3'], ["round",'./resources/audio/round.mp3'], ["go",'./resources/audio/go.mp3'], ["wheel",'./resources/audio/wheel.mp3'], './resources/audio/explain27.mp3', './resources/audio/story27.mp3', 'story27']
lesson[28] = ['Lesson 28', ['Jane', './resources/audio/jane.mp3'], ['roll','./resources/audio/roll.mp3'], ["some",'./resources/audio/some.mp3'], ["or",'./resources/audio/or.mp3'], ["girls",'./resources/audio/girls.mp3'], ["floor",'./resources/audio/floor.mp3'], ["which",'./resources/audio/which.mp3'], ["black",'./resources/audio/black.mp3'], './resources/audio/explain28.mp3', './resources/audio/story28.mp3', 'story28'];
lesson[29] = ['Lesson 29', ['for', './resources/audio/for.mp3'], ['hurt','./resources/audio/hurt.mp3'], ["how",'./resources/audio/how.mp3'], ["out",'./resources/audio/out.mp3'], ["cars",'./resources/audio/cars.mp3'], ["try",'./resources/audio/try.mp3'], ["train",'./resources/audio/train.mp3'], ["be",'./resources/audio/be.mp3'], ["would",'./resources/audio/would.mp3'], ["as",'./resources/audio/as.mp3'], './resources/audio/explain29.mp3', './resources/audio/story29.mp3', 'story29'];
lesson[30] = ['Lesson 30', './resources/audio/story30.mp3', 'story30'];
lesson[31] = ['Lesson 31', ['cut', './resources/audio/cut.mp3'], ['work','./resources/audio/work.mp3'], ["ax",'./resources/audio/ax.mp3'], ["wood",'./resources/audio/wood.mp3'], ["Ned",'./resources/audio/ned.mp3'], ["pile",'./resources/audio/pile.mp3'], ["saw",'./resources/audio/saw.mp3'], ["hard",'./resources/audio/hard.mp3'], ["think",'./resources/audio/think.mp3'], './resources/audio/explain31.mp3', './resources/audio/story31.mp3', 'story31'];
lesson[32] = ['Lesson 32', ['gone', './resources/audio/gone.mp3'], ['walk','./resources/audio/walk.mp3'], ["hear",'./resources/audio/hear.mp3'], ["two",'./resources/audio/two.mp3'], ["May",'./resources/audio/may.mp3'], ["cool",'./resources/audio/cool.mp3'], ["noise",'./resources/audio/noise.mp3'], ["air",'./resources/audio/air.mp3'], './resources/audio/explain32.mp3', './resources/audio/story32.mp3', 'story32'];
lesson[33] = ['Lesson 33', ['pull', './resources/audio/pull.mp3'], ['cart','./resources/audio/cart.mp3'], ["ride",'./resources/audio/ride.mp3'], ["hill",'./resources/audio/hill.mp3'], ["up",'./resources/audio/up.mp3'], ["goats",'./resources/audio/goats.mp3'], ["should",'./resources/audio/should.mp3'], ["Betsy",'./resources/audio/betsy.mp3'], "./resources/audio/explain33.mp3", './resources/audio/story33.mp3', 'story33'];
lesson[34] = ['Lesson 34', ['put', './resources/audio/put.mp3'], ['ring','./resources/audio/ring.mp3'], ["call",'./resources/audio/call.mp3'], ["roof",'./resources/audio/roof.mp3'], ["yet",'./resources/audio/yet.mp3'], ["fire",'./resources/audio/fire.mp3'], ["we",'./resources/audio/we.mp3'], ["blaze",'./resources/audio/blaze.mp3'], ["house",'./resources/audio/house.mp3'], './resources/audio/explain34.mp3', './resources/audio/story34.mp3', 'story34'];
lesson[35] = ['Lesson 35', './resources/audio/story35.mp3', 'story35'];
lesson[36] = ['Lesson 36', ['keep', './resources/audio/keep.mp3'], ['tells','./resources/audio/tells.mp3'], ["that",'./resources/audio/that.mp3'], ["wants",'./resources/audio/wants.mp3'], ["each",'./resources/audio/each.mp3'], ["Miss",'./resources/audio/miss.mp3'], ["rule",'./resources/audio/rule.mp3'], ["good",'./resources/audio/good.mp3'], './resources/audio/explain36.mp3', './resources/audio/story36.mp3', 'story36'];
lesson[37] = ['Lesson 37', ['child', './resources/audio/child.mp3'], ['when','./resources/audio/when.mp3'], ["books",'./resources/audio/books.mp3'], ["slates",'./resources/audio/slates.mp3'], ["church",'./resources/audio/church.mp3'], ["school",'./resources/audio/school.mp3'], './resources/audio/explain37.mp3', './resources/audio/story37.mp3', 'story37']
lesson[38] = ['Lesson 38', ['Henry', './resources/audio/henry.mp3'], ['oh','./resources/audio/oh.mp3'], ["first",'./resources/audio/first.mp3'], ["seen",'./resources/audio/seen.mp3'], ["know",'./resources/audio/know.mp3'], ["kill",'./resources/audio/kill.mp3'], ["quick",'./resources/audio/quick.mp3'], ["me",'./resources/audio/me.mp3'], ["quail",'./resources/audio/quail.mp3'], ["eat",'./resources/audio/eat.mp3'], './resources/audio/explain38.mp3', './resources/audio/story38.mp3', 'story38']; 
lesson[39] = ['Lesson 39', ['near', './resources/audio/near.mp3'], ['shut','./resources/audio/shut.mp3'], ["crib",'./resources/audio/crib.mp3'], ["name",'./resources/audio/name.mp3'], ["dear",'./resources/audio/dear.mp3'], ["blue",'./resources/audio/blue.mp3'], ["baby",'./resources/audio/baby.mp3'], ["sit",'./resources/audio/sit.mp3'], './resources/audio/explain39.mp3', './resources/audio/story39.mp3', 'story39'];
lesson[40] = ['Lesson 40', './resources/audio/story40.mp3', 'story40'];
lesson[41] = ['Lesson 41', ['far', './resources/audio/far.mp3'], ['were','./resources/audio/were.mp3'], ["sea",'./resources/audio/sea.mp3'], ["lights",'./resources/audio/lights.mp3'], ["tall",'./resources/audio/tall.mp3'], ["high",'./resources/audio/high.mp3'], ["its",'./resources/audio/its.mp3'], ["where",'./resources/audio/where.mp3'], './resources/audio/explain41.mp3', './resources/audio/story41.mp3', 'story41'];
lesson[42] = ['Lesson 42', ['took', './resources/audio/took.mp3'], ['wolf','./resources/audio/wolf.mp3'], ["wrong",'./resources/audio/wrong.mp3'], ["my",'./resources/audio/my.mp3'], ["sheep",'./resources/audio/sheep.mp3'], ["us",'./resources/audio/us.mp3'], ["more",'./resources/audio/more.mp3'], ["lambs",'./resources/audio/lambs.mp3'], ["watch",'./resources/audio/watch.mp3'], './resources/audio/explain42.mp3', './resources/audio/story42.mp3', 'story42'];
lesson[43] = ['Lesson 43', ['head', './resources/audio/head.mp3'], ['fun','./resources/audio/fun.mp3'], ["pipe",'./resources/audio/pipe.mp3'], ["made",'./resources/audio/made.mp3'], ["snow",'./resources/audio/snow.mp3'], ["laugh",'./resources/audio/laugh.mp3'], ["mouth",'./resources/audio/mouth.mp3'], "./resources/audio/explain43.mp3", './resources/audio/story43.mp3', 'story43'];
lesson[44] = ['Lesson 44', ['buzz', './resources/audio/buzz.mp3'], ['said','./resources/audio/said.mp3'], ["could",'./resources/audio/could.mp3'], ["vine",'./resources/audio/vine.mp3'], ["please",'./resources/audio/please.mp3'], ["bee",'./resources/audio/bee.mp3'], ["mean",'./resources/audio/mean.mp3'], ["once",'./resources/audio/once.mp3'], ["sweets",'./resources/audio/sweets.mp3'], './resources/audio/explain44.mp3', './resources/audio/story44.mp3', 'story44'];
lesson[45] = ['Lesson 45', './resources/audio/story45.mp3', 'story45'];
lesson[46] = ['Lesson 46', ['time', './resources/audio/time.mp3'], ['done','./resources/audio/done.mp3'], ["your",'./resources/audio/your.mp3'], ["right",'./resources/audio/right.mp3'], ["while",'./resources/audio/while.mp3'], ["might",'./resources/audio/might.mp3'], ["things",'./resources/audio/things.mp3'], ["halves",'./resources/audio/halves.mp3'], './resources/audio/explain46.mp3', './resources/audio/story46.mp3', 'story46'];
lesson[47] = ['Lesson 47', ['thank', './resources/audio/thank.mp3'], ['got','./resources/audio/got.mp3'], ["fish",'./resources/audio/fish.mp3'], ["safe",'./resources/audio/safe.mp3'], ["fell",'./resources/audio/fell.mp3'], ["went",'./resources/audio/went.mp3'], ["was",'./resources/audio/was.mp3'], ["arms",'./resources/audio/arms.mp3'], ["sprang",'./resources/audio/sprang.mp3'], './resources/audio/explain47.mp3', './resources/audio/story47.mp3', 'story47']
lesson[48] = ['Lesson 48', ['then', './resources/audio/then.mp3'], ['warm','./resources/audio/warm.mp3'], ["town",'./resources/audio/town.mp3'], ["been",'./resources/audio/been.mp3'], ["show",'./resources/audio/show.mp3'], ["asks",'./resources/audio/asks.mp3'], ["James",'./resources/audio/james.mp3'], ["drives",'./resources/audio/drives.mp3'], './resources/audio/explain48.mp3', './resources/audio/story48.mp3', 'story48'];
lesson[49] = ['Lesson 49', ["I'll", './resources/audio/iwill.mp3'], ['harm','./resources/audio/harm.mp3'], ["fur",'./resources/audio/fur.mp3'], ["don't",'./resources/audio/dont.mp3'], ["pat",'./resources/audio/pat.mp3'], ["purr",'./resources/audio/purr.mp3'], ["she'll",'./resources/audio/shewill.mp3'], ["deeds",'./resources/audio/deeds.mp3'], './resources/audio/explain49.mp3', './resources/audio/story49.mp3', 'story49'];
lesson[50] = ['Lesson 50', ["now", './resources/audio/now.mp3'], ['shall','./resources/audio/shall.mp3'], ["who",'./resources/audio/who.mp3'], ["queen",'./resources/audio/queen.mp3'], ["wreaths",'./resources/audio/wreaths.mp3'], ["crown",'./resources/audio/crown.mp3'], ["woods",'./resources/audio/woods.mp3'], './resources/audio/explain50.mp3', './resources/audio/story50.mp3', 'story50'];
lesson[51] = ['Lesson 51', ["from", './resources/audio/from.mp3'], ['God','./resources/audio/god.mp3'], ["moon",'./resources/audio/moon.mp3'], ["nut",'./resources/audio/nut.mp3'], ["long",'./resources/audio/long.mp3'], ["ago",'./resources/audio/ago.mp3'], ["small",'./resources/audio/small.mp3'], ["world",'./resources/audio/world.mp3'], ["shine",'./resources/audio/shine.mp3'], './resources/audio/explain51.mp3', './resources/audio/story51.mp3', 'story51'];
lesson[52] = ['Lesson 52', ["nigh", './resources/audio/nigh.mp3'], ['say','./resources/audio/say.mp3'], ["tears",'./resources/audio/tears.mp3'], ["stars",'./resources/audio/stars.mp3'], ["morn",'./resources/audio/morn.mp3'], ["Lord",'./resources/audio/lord.mp3'], ["woes",'./resources/audio/woes.mp3'], ["joys",'./resources/audio/joys.mp3'], ["smile",'./resources/audio/smile.mp3'], ["griefs",'./resources/audio/griefs.mp3'], './resources/audio/explain52.mp3', './resources/audio/story52.mp3', 'story52'];

var lessonNumber = 0;
var practice = [];
var repeat = [];
var index = 0;
var l = 0;
var wait = 0;
var click = 0;
var clickYes = 0;
var clickRead = 0;
var $page = $('#page');
var $yes = $('#yes');
var $lessonList = $("#lessonList");
var wordWritten = "";
var L;
var explain;
var story;
var storyWritten;
var getStory = 1;

var audio = document.createElement('audio');

$(document).ready(function () {

    (function() {

        if (!window.localStorage) {
            return;
        }

        /*
            On entering the page, fetch the
            clickedButtonIds list from localStorage
            and update the buttons indicated.
        */

        var buttonsToUpdateString =
            window.localStorage.getItem(
                'clickedButtonIds'
            );

        if (buttonsToUpdateString) {

            console.log(
                'Updating ' + buttonsToUpdateString
            );

            var buttonsToUpdateArray =
                buttonsToUpdateString.split('|');

            var usableLength =
                buttonsToUpdateArray.length - 1;

            for (
                var i = 0;
                i < usableLength;
                i++
            ) {

                console.log(
                    'Updating ' + buttonsToUpdateArray[i]
                );

                var $btn =
                    $('#' + buttonsToUpdateArray[i]);

                $btn.css('background-image', 'none');
                $btn.css('color', '#000');

            }
        }

    })();


//Pick a lesson
  $(".choose").click(function() {
      $('#readButton').css('display', 'flex');
      $('#lessonList').css('display', 'none');
      $(this).css('background-image', 'none');
      $(this).css('color', '#000');
      var lessonNumber = $(this).attr("id");
      var lessonNumber = lessonNumber.slice(6);
      l = 0; //resets variable
      wait = 0; //resets variable
      click = 0;
      clickYes = 0;
      clickRead = 0;

        (function(buttonId) {

            if (!window.localStorage) {
                return;
            }

            var clickedButtonIds =
                window.localStorage.getItem(
                    'clickedButtonIds'
                );

            if (clickedButtonIds) {
                clickedButtonIds.replace(
                    buttonId + '|',
                    ''
                );
            }
            else {
                clickedButtonIds = '';
            }

            clickedButtonIds +=
                buttonId + "|";

            window.localStorage.setItem(
                'clickedButtonIds',
                clickedButtonIds
            );

        })(this.id);


      makePractice(lessonNumber);
   });

/*creates the practice array, just the words
As well as sets up the audio for the list of words at the end
Contains Yes which is the click function to show the list of words
at the end. Also has the buttons for reading the story and putting up
the list of words*/
function makePractice(lessonNumber) {
  console.log('makePractice');
  practice = [];
  var thisLesson = lesson[lessonNumber];
  var long = thisLesson.length - 4;
  for (var i=1; i <= long; i++ ) {
    practice.push(thisLesson[i]);
    var L = practice.length;
  } //closes for
  index = 0;

  var explainAudio = thisLesson.length - 3;
  var explain = thisLesson[explainAudio];

  $yes.unbind().click(function() {
    if (clickYes === 0) {
      clickYes = 1; //so they can't double click and play the audio twice
    $page.css('display', 'none');
    $('#yes').css('display', 'none');
    $('#endScreen').css('display', 'flex');
    for (var i=0; i<L; i++) {
      $('#endScreen').append('<h2>' + practice[i][0] + '</h2>');
  }; //closes for

  var audioExplain = new Audio(explain);
  audioExplain.play();
  }; //closes if
  }); //closes yes

//Length zero is for the review days where there are no words. It goes straight
//to the story
  if (practice.length === 0) {
    writeStory($page, thisLesson, lessonNumber);
  } else {
    writeWords($page, practice, index, L);
  }; //closes else

//Button to read story
  $("#readButton").unbind().click(function() {
    clickRead = 1;
    $('#endScreen').empty();
     writeStory($page, thisLesson, lessonNumber);
  });

//button click that shows list of lessons
  $("#unorderedList").unbind().click(function() {
     $page.empty();
    $('#endScreen').empty();
    var end = thisLesson.length - 1;
    var getStory = thisLesson[end];
      $('#'+ getStory).css('display', 'none');
      $("#readButton").css('display', 'none');
      $('#yes').css('display', 'none');
     $lessonList.css('display', 'flex');
  });

}; //closes makePractice


//shows the story (which is in html)
function writeStory($page, thisLesson, lessonNumber) {
  console.log('write story');
   $('#readButton').css('display', 'none');
   var end = thisLesson.length - 1;
   var getStory = thisLesson[end];
    $page.empty();
    $('#'+ getStory).css('display','flex');

//Plays the story audio
    $(".readToMe").unbind().click(function() {
      var storyAudio = thisLesson.length - 2;
      var getStoryAudio = thisLesson[storyAudio];
      var audio = new Audio(getStoryAudio);
      audio.play();
    });  //  closes read to me

//Plays applause when you've read the story.
        $(".readIt").click(function() {
          var audio = new Audio('applause.mp3');
          audio.play();
        }); // closes play cheer

        //Moves to Next Lesson
        $(".next").unbind().click(function() {
          console.log('next lesson');
          $('#lesson'+lessonNumber).css('background-image', 'none');
          $('#lesson'+lessonNumber).css('color', '#000');
            $('#'+ getStory).css('display', 'none');
          console.log('lesson number current ' + lessonNumber);
          lessonNumber++;
          console.log('lesson number next ' + lessonNumber);
          l = 0;
          wait = 0;
          click = 0;
          clickYes = 0;
          clickRead = 0;
          $('#readButton').css('display', 'flex');
          makePractice(lessonNumber);
        }); // closes next lesson

}; // closes writeStory

//Writes the first set of words on the page in order
function newWord($page, index, L) {
  console.log('new word');
      click = 0;
      console.log('l ' + l + ' clickRead' + clickRead);
  if (clickYes == 1) {
    $page.empty();
    clickYes = 0;
    return;
  }
  if (clickRead == 1) {
    $page.empty();
    return;
  }
  if (l < L-1) {
      l = l + 1;
      index = l;
      writeWords($page, practice, index, L);
  } else {
      practiceWords($page, index, L);
  } //closes else
}; //closes newWord

//Chooses the random words from the lesson, wait holds off showing checkmark
//until two times the number of words in the lesson have shown randomly
function practiceWords($page, index, L) {
  console.log('practice words');
  if (wait === 2*L) {
    clickYes = 0;
    $('#yes').css('display', 'block');
    wait++;
  } else {
    wait = wait + 1;
  } //closes else
  var index = Math.floor(Math.random() * L);
  repeat.push(index);
  //keeps it from repeating a word more than twice
  if (repeat[repeat.length-1] === repeat[repeat.length-2]) {
    var index = Math.floor(Math.random() * L);
    writeWords($page, practice, index, L);
  } else {
  writeWords($page, practice, index, L);
}; // closes else
}; //closes practiceWords

//Writes the new word or random word on the page
function writeWords($page, practice, index, L) {
  console.log('write words');
  $page.empty();
  $page.css('display', 'flex');
  wordWritten = practice[index][0];
  $page.html('<span>' + wordWritten + '</span>');
  var wordAudio = practice[index][1];
  audio.src = wordAudio;
  //unbind keeps things from happening twice
  $page.unbind().click(function() {
    if (click === 0) {
    $('span').css('text-shadow', '0px 0px white');
    audio.play();
    click = 1;
  window.setTimeout(function() {
    newWord($page, index, L);
}, 2000);
}; // closes if
}); //closes page click

}; //closes writeWords

//Write directions and close directions
$('#directions').click(function() {
    $('.directions').css({
        'display': 'block',
        'z-index': '10'
    });
});

$('#closeDirections').click(function() {
    $('.directions').css({
        'display': 'none'
    });
});

  }); // closes document load
